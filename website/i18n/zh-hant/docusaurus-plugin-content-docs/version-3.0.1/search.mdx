---
keywords:
  - algolia
  - search
---

# æœå°‹

æœ‰å¹¾ç¨®æ–¹å¼å¯ä»¥ç‚ºæ‚¨çš„ç¶²ç«™æ·»åŠ æœå°‹åŠŸèƒ½ï¼š

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch) (**å®˜æ–¹æ”¯æ´**)
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [æœ¬åœ°æœå°‹](#using-local-search)
- ğŸ‘¥ [è‡ªè¨‚ `SearchBar` å…ƒä»¶](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus ç‚º [Algolia DocSearch](#using-algolia-docsearch) æä¾›**ä¸€ç´šæ”¯æ´**ã€‚

ğŸ‘¥ å…¶ä»–é¸é …ç”±**ç¤¾ç¾¤ç¶­è­·**ï¼šè«‹å°‡å•é¡Œå›å ±è‡³å„è‡ªçš„å„²å­˜åº«ã€‚

:::

## ğŸ¥‡ ä½¿ç”¨ Algolia DocSearch {#using-algolia-docsearch}

Docusaurus **å®˜æ–¹æ”¯æ´** [Algolia DocSearch](https://docsearch.algolia.com)ã€‚

è©²æœå‹™å°ä»»ä½•é–‹æºå°ˆæ¡ˆ**å…è²»**ï¼šè«‹ç¢ºä¿é–±è®€[æª¢æŸ¥æ¸…å–®](https://docsearch.algolia.com/docs/who-can-apply/)ä¸¦[ç”³è«‹ DocSearch è¨ˆç•«](https://docsearch.algolia.com/apply)ã€‚

DocSearch æ¯é€±çˆ¬å–æ‚¨çš„ç¶²ç«™ä¸€æ¬¡ï¼ˆæ’ç¨‹å¯é€éç¶²é ä»‹é¢è¨­å®šï¼‰ï¼Œä¸¦å°‡æ‰€æœ‰å…§å®¹å½™ç¸½åˆ° Algolia ç´¢å¼•ä¸­ã€‚é€™äº›å…§å®¹éš¨å¾Œé€é Algolia API ç›´æ¥å¾å‰ç«¯æŸ¥è©¢ã€‚

å¦‚æœæ‚¨çš„ç¶²ç«™[ä¸ç¬¦åˆè³‡æ ¼](https://docsearch.algolia.com/docs/who-can-apply)ä½¿ç”¨å…è²»è¨—ç®¡ç‰ˆ DocSearchï¼Œæˆ–æ‚¨çš„ç¶²ç«™ä½æ–¼é˜²ç«ç‰†å¾Œä¸”éå…¬é–‹ï¼Œå‰‡å¯ä»¥[è‡ªè¡Œé‹è¡Œ](https://docsearch.algolia.com/docs/run-your-own/) DocSearch çˆ¬èŸ²ã€‚

:::note

é è¨­æƒ…æ³ä¸‹ï¼ŒDocusaurus é è¨­é…ç½®æœƒç”Ÿæˆ Algolia çˆ¬èŸ²å¯ä½¿ç”¨çš„ [sitemap.xml](https://docusaurus.io/sitemap.xml)ã€‚

:::

:::info[ä¾†è‡ªèˆŠç‰ˆ docsearchï¼Ÿ]

æ‚¨å¯ä»¥åœ¨[æˆ‘å€‘çš„éƒ¨è½æ ¼æ–‡ç« ](/blog/2021/11/21/algolia-docsearch-migration)æˆ– [DocSearch é·ç§»æ–‡ä»¶](https://docsearch.algolia.com/docs/migrating-from-legacy)ä¸­é–±è®€æ›´å¤šé—œæ–¼å¾èˆŠç‰ˆ DocSearch åŸºç¤æ¶æ§‹é·ç§»çš„è³‡è¨Šã€‚

:::

### ç´¢å¼•é…ç½® {#algolia-index-configuration}

åœ¨æ‚¨çš„ç”³è«‹ç²æ‰¹å‡†ä¸¦éƒ¨ç½²å¾Œï¼Œæ‚¨å°‡æ”¶åˆ°ä¸€å°é›»å­éƒµä»¶ï¼Œå…¶ä¸­åŒ…å«å°‡ DocSearch æ·»åŠ åˆ°å°ˆæ¡ˆçš„æ‰€æœ‰è©³ç´°è³‡è¨Šã€‚æ‚¨å¯ä»¥é€é[ç¶²é ä»‹é¢](https://crawler.algolia.com/)ç·¨è¼¯å’Œç®¡ç†çˆ¬å–ã€‚ç´¢å¼•åœ¨éƒ¨ç½²å¾Œç«‹å³å¯ç”¨ï¼Œå› æ­¤é€šå¸¸ä¸éœ€è¦æ‰‹å‹•é…ç½®ã€‚

:::tip

å¼·çƒˆå»ºè­°ä½¿ç”¨é¡ä¼¼æ–¼ [**Docusaurus v3 ç¶²ç«™é…ç½®**](https://docsearch.algolia.com/docs/templates/#docusaurus-v2-template)çš„è¨­å®šã€‚

:::

### é€£æ¥ Algolia {#connecting-algolia}

Docusaurus è‡ªå¸¶çš„ `@docusaurus/preset-classic` æ”¯æ´ Algolia DocSearch æ•´åˆã€‚å¦‚æœæ‚¨ä½¿ç”¨ç¶“å…¸é è¨­é…ç½®ï¼Œå‰‡ç„¡éœ€é¡å¤–å®‰è£ã€‚

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. Install the package:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

ç„¶å¾Œï¼Œåœ¨æ‚¨çš„ `themeConfig` ä¸­æ·»åŠ ä¸€å€‹ `algolia` æ¬„ä½ã€‚**[ç”³è«‹ DocSearch](https://docsearch.algolia.com/apply/)** ä»¥ç²å–æ‚¨çš„ Algolia ç´¢å¼•å’Œ API é‡‘é‘°ã€‚

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

`searchParameters` é¸é …åœ¨ Docusaurus v1 ä¸­åç‚º `algoliaOptions`ã€‚

è«‹åƒé–±å…¶[å®˜æ–¹ DocSearch æ–‡ä»¶](https://docsearch.algolia.com/docs/api#searchparameters)äº†è§£å¯èƒ½çš„å€¼ã€‚

:::

:::warning

åœ¨ Algolia çˆ¬å–æ‚¨çš„ç¶²ç«™ä¹‹å‰ï¼Œæœå°‹åŠŸèƒ½å¯èƒ½ç„¡æ³•å¯é é‹ä½œã€‚

å¦‚æœæœå°‹åœ¨é‡å¤§è®Šæ›´å¾Œç„¡æ³•é‹ä½œï¼Œè«‹ä½¿ç”¨ Algolia å„€è¡¨æ¿**è§¸ç™¼æ–°çš„çˆ¬å–**ã€‚

:::

### ä¸Šä¸‹æ–‡æœå°‹ {#contextual-search}

ä¸Šä¸‹æ–‡æœå°‹åŠŸèƒ½**é è¨­ç‚ºå•Ÿç”¨**ã€‚

å®ƒèƒ½ç¢ºä¿æœå°‹çµæœ**èˆ‡ç•¶å‰èªè¨€å’Œç‰ˆæœ¬ç›¸é—œ**ã€‚

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

å‡è¨­æ‚¨æœ‰2å€‹æ–‡ä»¶ç‰ˆæœ¬ï¼ˆ**v1**å’Œ**v2**ï¼‰å’Œ2ç¨®èªè¨€ï¼ˆ`en`å’Œ`fr`ï¼‰ã€‚

ç•¶ç€è¦½v2æ–‡ä»¶æ™‚ï¼Œè‹¥æœå°‹çµæœåŒ…å«v1æ–‡ä»¶æœƒé¡¯å¾—å¥‡æ€ªã€‚æœ‰æ™‚v1å’Œv2æ–‡ä»¶å…§å®¹éå¸¸ç›¸ä¼¼ï¼Œé€™æœƒå°è‡´ç›¸åŒæŸ¥è©¢å‡ºç¾é‡è¤‡çš„æœå°‹çµæœï¼ˆæ¯å€‹ç‰ˆæœ¬å„å‡ºç¾ä¸€æ¬¡ï¼‰ã€‚

åŒç†ï¼Œç•¶ç€è¦½æ³•èªç¶²ç«™æ™‚ï¼Œè‹¥æœå°‹çµæœåŒ…å«è‹±èªæ–‡ä»¶ä¹Ÿæœƒé¡¯å¾—çªå…€ã€‚

ç‚ºè§£æ±ºæ­¤å•é¡Œï¼Œä¸Šä¸‹æ–‡æœå°‹åŠŸèƒ½æœƒè­˜åˆ¥æ‚¨æ­£åœ¨ç€è¦½çš„ç‰¹å®šæ–‡ä»¶ç‰ˆæœ¬å’Œèªè¨€ï¼Œä¸¦å‹•æ…‹å»ºç«‹æœå°‹æŸ¥è©¢éæ¿¾æ¢ä»¶ã€‚

- åœ¨`/en/docs/v1/myDoc`é é¢æ™‚ï¼Œæœå°‹çµæœåƒ…åŒ…å«**v1**æ–‡ä»¶çš„**è‹±æ–‡**çµæœï¼ˆä»¥åŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰
- åœ¨`/fr/docs/v2/myDoc`é é¢æ™‚ï¼Œæœå°‹çµæœåƒ…åŒ…å«**v2**æ–‡ä»¶çš„**æ³•æ–‡**çµæœï¼ˆä»¥åŠå…¶ä»–æœªç‰ˆæœ¬åŒ–çš„é é¢ï¼‰

:::info

ç•¶ä½¿ç”¨`contextualSearch: true`ï¼ˆé è¨­å€¼ï¼‰æ™‚ï¼Œä¸Šä¸‹æ–‡é¢éæ¿¾å™¨æœƒèˆ‡`algolia.searchParameters.facetFilters`æä¾›çš„éæ¿¾å™¨åˆä½µã€‚

è‹¥æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œæ‚¨å¯ä»¥åœç”¨`contextualSearch`ä¸¦è‡ªè¡Œå®šç¾©`facetFilters`ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

è«‹åƒè€ƒç›¸é—œçš„[Algoliaé¢éæ¿¾æ–‡ä»¶](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/)ã€‚

:::

### è‡ªè¨‚Algoliaæœå°‹æ¨£å¼ {#styling-your-algolia-search}

DocSearché è¨­é™„å¸¶ä¸€å€‹ç¶“éå¾®èª¿çš„ä¸»é¡Œï¼Œè©²ä¸»é¡Œå°ˆç‚ºç„¡éšœç¤™è¨­è¨ˆï¼Œç¢ºä¿é¡è‰²å’Œå°æ¯”åº¦ç¬¦åˆæ¨™æº–ã€‚

æ‚¨ä»å¯é€éç·¨è¼¯`/src/css/custom.css`æª”æ¡ˆï¼Œä½¿ç”¨Docusaurusçš„[Infima CSSè®Šæ•¸](styling-layout.mdx#styling-your-site-with-infima)ä¾†é‡æ–°å®šç¾©DocSearchçš„æ¨£å¼ã€‚

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### è‡ªè¨‚Algoliaæœå°‹è¡Œç‚º {#customizing-the-algolia-search-behavior}

Algolia DocSearchæ”¯æ´ä¸€ç³»åˆ—[é¸é …](https://docsearch.algolia.com/docs/api/)ï¼Œæ‚¨å¯å°‡é€™äº›é¸é …å‚³éè‡³`docusaurus.config.js`æª”æ¡ˆä¸­çš„`algolia`æ¬„ä½ã€‚

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### ç·¨è¼¯Algoliaæœå°‹å…ƒä»¶ {#editing-the-algolia-search-component}

è‹¥æ‚¨åå¥½ç·¨è¼¯Algoliaæœå°‹çš„Reactå…ƒä»¶ï¼Œå¯å°`@docusaurus/theme-search-algolia`ä¸­çš„`SearchBar`å…ƒä»¶é€²è¡Œ[swizzle](swizzling.mdx)æ“ä½œï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### æ”¯æ´æœå‹™ {#algolia-support}

Algolia DocSearchåœ˜éšŠå¯å”åŠ©æ‚¨è§£æ±ºç¶²ç«™ä¸Šçš„æœå°‹å•é¡Œã€‚

æ‚¨å¯é€é[é›»å­éƒµä»¶](mailto:documentationsearch@algolia.com)æˆ–[Discord](https://discord.gg/tXdr5mP)è¯ç¹«ä»–å€‘ã€‚

Docusaurusåœ¨[Discord](https://discordapp.com/invite/docusaurus)ä¸Šä¹Ÿè¨­æœ‰`#algolia`é »é“ã€‚

## ğŸ‘¥ ä½¿ç”¨Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearchçš„é‹ä½œæ–¹å¼èˆ‡Algolia DocSearché¡ä¼¼ï¼Œä¸åŒä¹‹è™•åœ¨æ–¼æ‚¨çš„ç¶²ç«™æœƒè¢«ç´¢å¼•è‡³Typesenseæœå°‹å¢é›†ä¸­ã€‚

Typesense æ˜¯ä¸€å€‹[é–‹æº](https://github.com/typesense/typesense)å³æ™‚æœå°‹å¼•æ“ï¼Œæ‚¨å¯ä»¥é¸æ“‡ï¼š

- åœ¨è‡ªæœ‰ä¼ºæœå™¨ä¸Š[è‡ªè¡Œè¨—ç®¡](https://typesense.org/docs/latest/guide/install-typesense.html#option-2-local-machine-self-hosting)ï¼Œæˆ–
- ä½¿ç”¨è¨—ç®¡æœå‹™ [Typesense Cloud](https://cloud.typesense.org)ã€‚

èˆ‡ Algolia DocSearch é¡ä¼¼ï¼ŒåŒ…å«å…©å€‹å…ƒä»¶ï¼š

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) - è² è²¬çˆ¬å–ç¶²ç«™å…§å®¹ä¸¦å°‡è³‡æ–™ç´¢å¼•è‡³ Typesense å¢é›†ã€‚
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) - å¯æ•´åˆè‡³ç¶²ç«™çš„æœå°‹åˆ— UI å…ƒä»¶ã€‚

è«‹åƒé–±é€æ­¥æ•™å­¸ï¼š[åŸ·è¡Œ typesense-docsearch-scraper](https://typesense.org/docs/latest/guide/docsearch.html#step-1-set-up-docsearch-scraper) èˆ‡ [åœ¨ Docusaurus ç¶²ç«™å®‰è£æœå°‹åˆ—](https://typesense.org/docs/latest/guide/docsearch.html#option-a-docusaurus-powered-sites)ã€‚

## ğŸ‘¥ ä½¿ç”¨æœ¬åœ°æœå°‹ {#using-local-search}

ç•¶æœå°‹ç´¢å¼•è¦æ¨¡è¼ƒå°ä¸”å¯ç›´æ¥ä¸‹è¼‰è‡³ä½¿ç”¨è€…ç€è¦½å™¨æ™‚ï¼Œå¯æ¡ç”¨æœ¬åœ°æœå°‹å¤–æ›ç¨‹å¼ã€‚

ç¤¾ç¾¤æ”¯æ´çš„[æœ¬åœ°æœå°‹å¤–æ›ç¨‹å¼æ¸…å–®](https://docusaurus.io/community/resources#search)å¯ä¾›åƒè€ƒã€‚

## ğŸ‘¥ ä½¿ç”¨è‡ªè¨‚æœå°‹ {#using-your-own-search}

è‹¥è¦ä½¿ç”¨è‡ªè¨‚æœå°‹ï¼Œè«‹æ›¿æ› `@docusaurus/theme-classic` ä¸­çš„ `SearchBar` å…ƒä»¶

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

æ­¤æ“ä½œæœƒåœ¨å°ˆæ¡ˆä¸­å»ºç«‹ `src/themes/SearchBar` æª”æ¡ˆã€‚é‡å•Ÿé–‹ç™¼ä¼ºæœå™¨ä¸¦ç·¨è¼¯å…ƒä»¶å¾Œï¼ŒDocusaurus å°‡æ”¹ç”¨æ‚¨çš„è‡ªè¨‚ `SearchBar` å…ƒä»¶ã€‚

**æ³¨æ„**ï¼šæ‚¨äº¦å¯[å¾ Algolia SearchBar æ›¿æ›](#editing-the-algolia-search-component)ä¸¦åŸºæ–¼æ­¤é–‹ç™¼è‡ªè¨‚æœå°‹å…ƒä»¶ã€‚