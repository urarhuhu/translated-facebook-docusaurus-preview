---
title: Docusaurus 2.4
authors: [slorber]
tags: [release]
image: ./img/social-card.png
date: 2023-03-23
---

æˆ‘å€‘å¾ˆé«˜èˆˆå®£å¸ƒæ¨å‡º **Docusaurus 2.4** ç‰ˆæœ¬ã€‚

å‡ç´šéç¨‹æ‡‰è©²å¾ˆç°¡å–®ï¼šæ­£å¦‚æˆ‘å€‘çš„[ç™¼ä½ˆæµç¨‹æ–‡ä»¶](/community/release-process)æ‰€è¿°ï¼Œæ¬¡è¦ç‰ˆæœ¬éµå¾ª[èªæ„åŒ–ç‰ˆæœ¬æ§åˆ¶](https://semver.org/)è¦ç¯„ã€‚

![Docusaurus éƒ¨è½æ ¼æ–‡ç« ç¤¾äº¤å¡ç‰‡](./img/social-card.png)

<!--truncate-->

import BrowserWindow from '@site/src/components/BrowserWindow';
import IframeWindow from '@site/src/components/BrowserWindow/IframeWindow';
import ErrorBoundaryTestButton from '@site/src/components/ErrorBoundaryTestButton';

## é‡é»æ›´æ–°

### å´é‚Šæ¬„é …ç›®æè¿°

åœ¨ [#8236](https://github.com/facebook/docusaurus/pull/8236) ä¸­ï¼Œæˆ‘å€‘æ–°å¢äº†ç‚º `link` å’Œ `category` é¡å‹çš„æ–‡æª”å´é‚Šæ¬„é …ç›®æä¾› `description` å±¬æ€§çš„åŠŸèƒ½ã€‚

```tsx title="sidebars.js"
[
  {
    type: 'link',
    label: 'Link with description',
    href: 'https://docusaurus.io',
    // highlight-next-line
    description: 'Some link description',
  },
  {
    type: 'category',
    label: 'Category with description',
    // highlight-next-line
    description: 'Some category description',
    items: [],
  },
];
```

é€™äº›æè¿°å°‡ç”¨æ–¼åˆ†é¡ç”Ÿæˆçš„ç´¢å¼•é é¢ä¸­ã€‚

![é¡¯ç¤ºå¸¶æœ‰è‡ªè¨‚æè¿°çš„å´é‚Šæ¬„åˆ†é¡ç”Ÿæˆç´¢å¼•](./img/sidebar-item-description.jpg)

### ä¸»é¡ŒæŸ¥è©¢å­—ä¸²

åœ¨ [#8708](https://github.com/facebook/docusaurus/pull/8708) ä¸­ï¼Œæˆ‘å€‘æ–°å¢äº†é€éæ–°çš„ `docusaurus-theme` æŸ¥è©¢å­—ä¸²åƒæ•¸å¼·åˆ¶ Docusaurus ä»¥ `light` æˆ– `dark` æ¨¡å¼åˆå§‹åŒ–çš„åŠŸèƒ½ã€‚

é€™å°æ–¼åœ¨ iframe æˆ– WebView ä¸­åµŒå…¥ç¾æœ‰ Docusaurus é é¢æ™‚ç¢ºä¿ä¸»é¡Œä¸€è‡´æ€§éå¸¸æœ‰ç”¨ã€‚

<IframeWindow url="/docs/?docusaurus-theme=light" />

<IframeWindow url="/docs/?docusaurus-theme=dark" />

### Remark æ’ä»¶ npm2yarn å‡ç´š

åœ¨ [#8690](https://github.com/facebook/docusaurus/pull/8690) ä¸­ï¼Œæˆ‘å€‘å‡ç´šäº† Remark æ’ä»¶ [@docusaurus/remark-plugin-npm2yarn](https://github.com/facebook/docusaurus/tree/main/packages/docusaurus-remark-plugin-npm2yarn)ï¼Œä¿®å¾©äº†å¤šå€‹è½‰æ›éŒ¯èª¤ï¼Œæ–°å¢å° pnpm çš„å®Œæ•´æ”¯æ´ï¼Œä¸¦å…è¨±è¨»å†Šè‡ªè¨‚è½‰æ›å™¨ä¾†ç”¢ç”Ÿæ–°çš„æ¨™ç±¤é ã€‚

````markdown
Run these commands!

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```
````

<BrowserWindow>

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```

</BrowserWindow>

### å¤šå€‹è¿½è¹¤ ID çš„ gtag æ”¯æ´

åœ¨ [#8620](https://github.com/facebook/docusaurus/pull/8620) ä¸­ï¼Œæˆ‘å€‘ç‚º [@docusaurus/plugin-google-gtag](/docs/api/plugins/@docusaurus/plugin-google-gtag) æ’ä»¶æ–°å¢äº†å®£å‘Šå¤šå€‹è¿½è¹¤ ID çš„æ”¯æ´ã€‚

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        gtag: {
          trackingID: [
            // highlight-next-line
            'G-<YOUR-NEW-GA4-ID>',
            // highlight-next-line
            'UA-<YOUR-OLD-UA-ID>',
          ],
        },
      },
    ],
  ],
};
```

:::warning[Google å³å°‡åœæ­¢ Universal Analytics æœå‹™]

**[Google å°‡æ–¼ 2023 å¹´ 7 æœˆ 1 æ—¥åœæ­¢å…¶ Universal Analytics æœå‹™](https://blog.google/products/marketingplatform/analytics/prepare-for-future-with-google-analytics-4/)**ã€‚

Docusaurus ç”¨æˆ¶æ‡‰é·ç§»è‡³ Google Analytics 4ã€‚Google **ä¸å…è¨±å°‡ç¾æœ‰çš„ Universal Analytics æ•¸æ“šé·ç§»**åˆ°æ–°çš„ Google Analytics 4 è³‡æºã€‚

ç‚ºäº†ä¿æŒåˆ†ææ•¸æ“šçš„é€£çºŒæ€§ï¼Œæˆ‘å€‘æš«æ™‚å»ºè­°æ‚¨åŒæ™‚å‘å…©å€‹è¿½è¹¤ ID å ±å‘Šäº‹ä»¶ï¼šèˆŠçš„ (`UA-*`) å’Œæ–°çš„ (`G-*`)ã€‚è©³æƒ…è«‹åƒé–± **[å°ˆå±¬è­°é¡Œ](https://github.com/facebook/docusaurus/issues/7221)**ã€‚

:::

### é–‹ç™¼è€…é«”é©—

åœ¨ [#8736](https://github.com/facebook/docusaurus/pull/8736) ä¸­ï¼Œæˆ‘å€‘æ”¹é€²äº†éŒ¯èª¤è¨Šæ¯çš„å‘ˆç¾æ–¹å¼ï¼Œä¸¦æ–°å¢äº†å‘ˆç¾éŒ¯èª¤å®Œæ•´å› æœéˆçš„åˆæ­¥æ”¯æ´ï¼ˆåƒè¦‹ [ES2022 éŒ¯èª¤åŸå› ](https://h3manth.com/ES2022/#error-cause)ï¼‰ã€‚

:::tip

é»æ“Šæ­¤è™•æŸ¥çœ‹å¯¦éš›æ•ˆæœï¼š<ErrorBoundaryTestButton cause="å¯èƒ½æ˜¯ undefined ä¸æ˜¯ä¸€å€‹å‡½æ•¸ ğŸ˜„"/>

:::

åœ¨ [#8735](https://github.com/facebook/docusaurus/pull/8735) ä¸­ï¼Œæˆ‘å€‘é‚„ä½¿å°èˆªæ¬„ç›¸é—œçš„éŒ¯èª¤è¨Šæ¯æ›´åŠ æ¸…æ™°ï¼Œå¹«åŠ©ç”¨æˆ¶ç†è§£ä»–å€‘åšéŒ¯äº†ä»€éº¼ã€‚

![Docusaurus å°èˆªæ¬„éŒ¯èª¤è¨Šæ¯æˆªåœ–](./img/navbar-error.jpg)

### ç¿»è­¯åŠŸèƒ½

æˆ‘å€‘æ–°å¢äº†å°ä»¥ä¸‹æ–°å…ƒç´ çš„ç¿»è­¯æ”¯æ´ï¼š

- [#8677](https://github.com/facebook/docusaurus/pull/8677) å¼•å…¥æ–°çš„ `process.env.DOCUSAURUS_CURRENT_LOCALE`ï¼ˆå¯¦é©—æ€§åŠŸèƒ½ï¼‰ï¼Œå…è¨±æ‚¨æœ¬åœ°åŒ–é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç¶²ç«™æ¨™é¡Œã€æ¨™èªã€å…¬å‘Šæ¬„ã€baseUrlç­‰...
- [#8616](https://github.com/facebook/docusaurus/pull/8616) å…è¨±ç¿»è­¯å°èˆªæ¬„å’Œé è…³æ¨™èªŒçš„æ›¿ä»£æ–‡å­—

æˆ‘å€‘æ–°å¢äº†å¤šç¨®èªè¨€çš„é è¨­ä¸»é¡Œç¿»è­¯æ”¯æ´ï¼š

- ğŸ‡­ğŸ‡º [#8668](https://github.com/facebook/docusaurus/pull/8668): åŒˆç‰™åˆ©æ–‡
- ğŸ‡³ğŸ‡´ [#8631](https://github.com/facebook/docusaurus/pull/8631): æŒªå¨æ–‡ï¼ˆåšå…‹é¦¬çˆ¾èªï¼‰

:::tip

å®Œæˆä¸»é¡Œç¿»è­¯æ˜¯ä¸€é …[æŒçºŒé€²è¡Œçš„å·¥ä½œ](https://github.com/facebook/docusaurus/issues/3526)ï¼Œä¹Ÿæ˜¯ç‚ºDocusaurusè²¢ç»çš„ç°¡å–®æ–¹å¼ã€‚æˆ‘å€‘æœƒå®šæœŸæ–°å¢ä¸»é¡ŒåŠŸèƒ½ï¼Œé€™äº›åŠŸèƒ½é€šå¸¸[éœ€è¦æ–°çš„ç¿»è­¯](https://github.com/facebook/docusaurus/issues/3526)ã€‚

:::

## å…¶ä»–è®Šæ›´

å…¶ä»–å€¼å¾—æ³¨æ„çš„è®Šæ›´åŒ…æ‹¬ï¼š

- [#8674](https://github.com/facebook/docusaurus/pull/8674): å°Šé‡ `prefers-reduced-motion: reduce` åª’é«”æŸ¥è©¢
- [#8712](https://github.com/facebook/docusaurus/pull/8712): åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨é¡å‹ç‚º `docSidebar` çš„å°èˆªæ¬„é …ç›®
- [#8801](https://github.com/facebook/docusaurus/pull/8801): å…è¨±æ¨™ç±¤é çš„å­é …ç‚ºå‡å€¼
- [#8757](https://github.com/facebook/docusaurus/pull/8757): è®“æœå°‹é é¢èƒ½å›æ‡‰å¤–éƒ¨æŸ¥è©¢å­—ä¸²çš„è®Šæ›´
- [#8803](https://github.com/facebook/docusaurus/pull/8803): ä¿®æ­£RTLæ¨¡å¼ä¸‹ç¨‹å¼ç¢¼å€å¡ŠæŒ‰éˆ•çš„ä½ç½®
- [#8615](https://github.com/facebook/docusaurus/pull/8615): ä¿®æ­£ä½¿ç”¨æ·±è‰²å°èˆªæ¬„æ™‚çš„é¡è‰²æ¨¡å¼åˆ‡æ›
- [#8699](https://github.com/facebook/docusaurus/pull/8699): ä¿®æ­£å°èˆªæ¬„ä¸‹æ‹‰é¸é …çš„æ¨™ç±¤ç„¦é»éŒ¯èª¤

æŸ¥çœ‹ **[2.4.0 è®Šæ›´æ—¥èªŒæ¢ç›®](/changelog/2.4.0)** ä»¥ç²å–å®Œæ•´çš„è®Šæ›´åˆ—è¡¨ã€‚